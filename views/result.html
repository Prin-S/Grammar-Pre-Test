<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Grammar Pre-Test</title>
    <meta name="description" content="ไวยากรณ์ภาษาอังกฤษของท่านอยู่ในระดับใด? ทำแบบทดสอบฟรี! พร้อมประเมินผลทันที และรับคำแนะนำอย่างละเอียดจาก อ.ปริญญ์ PrinEnglish" />
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="../public/style.css" type="text/css" />
    <link rel="icon" href="https://online.prinenglish.com/wp-content/uploads/2022/12/new-PrinEnglish-logo-site-icon-webp.webp" type="image/x-icon">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css">
  </head>
  <body>
    <header class="header">
      <div class="container header-container">
          <nav class="navbar navbar-expand-lg">
              <div class="container-fluid">
                  <div>
                      <a href="https://prinenglish.com" class="navbar-brand">
                          <img width="220" height="44" src="https://i0.wp.com/prinenglish.com/wp-content/uploads/logo_prin-english.webp">
                      </a>
                  </div>
                  <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                      <i class="fa-solid fa-bars"></i>
                  </button>
                  <div class="collapse navbar-collapse" id="navbarSupportedContent">
                      <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                          <li class="nav-item">
                              <a class="nav-link" href="https://prinenglish.com/about/">About Aj. Prin</a>
                          </li>
                          <li class="nav-item">
                              <a class="nav-link" href="https://online.prinenglish.com/pass-key/">Pass Key</a>
                          </li>
                          <li class="nav-item dropdown">
                              <a class="nav-link dropdown-toggle" href="https://online.prinenglish.com/our-courses/" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                  Courses
                              </a>
                              <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                                  <li><a class="dropdown-item" href="https://online.prinenglish.com/our-courses/">หลักสูตรออนไลน์</a></li>
                                  <li><a class="dropdown-item" href="https://online.prinenglish.com/trial/">ทดลองเรียนฟรี</a></li>
                                  <li><a class="dropdown-item" href="https://online.prinenglish.com/quizzes/pre-test/">Pre-Test</a></li>
                                  <li><a class="dropdown-item" href="https://prinenglish.com/toeic-pre-test/">TOEIC Pre-Test</a></li>
                              </ul>
                          </li>
                          <li class="nav-item">
                              <a class="nav-link" href="https://prinenglish.com/students-reviews/">Reviews</a>
                          </li>
                          <li class="nav-item dropdown">
                              <a class="nav-link dropdown-toggle" href="https://prinenglish.com/corporate-training/" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                  ลูกค้าองค์กร
                              </a>
                              <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                                  <li><a class="nav-link" href="https://prinenglish.com/corporate-training/">ลูกค้าองค์กร</a></li>
                                  <li><a class="nav-link" href="https://prinenglish.com/data-services/">Data Services</a></li>
                              </ul>
                          </li>
                          <li class="nav-item dropdown">
                              <a class="nav-link dropdown-toggle" href="https://prinenglish.com/all-about-toeic/" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                  All about TOEIC
                              </a>
                              <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                                  <li><a class="dropdown-item" href="https://prinenglish.com/all-about-toeic/">All about TOEIC</a></li>
                                  <li><a class="dropdown-item" href="https://prinenglish.com/example-toeic/">ตัวอย่างข้อสอบ TOEIC</a></li>
                                  <li><a class="dropdown-item" href="https://prinenglish.com/company-list-toeic/">หน่วยงาน – บริษัทชั้นนำ ที่รับคะแนน TOEIC</a></li>
                              </ul>
                          </li>
                          <li class="nav-item dropdown">
                              <a class="nav-link dropdown-toggle" href="https://prinenglish.com/faq/" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                  FAQs
                              </a>
                              <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                                  <li><a class="dropdown-item" href="https://prinenglish.com/faq/">คำถามที่พบบ่อย</a></li>
                                  <li><a class="dropdown-item" href="https://prinenglish.com/how-to-use-a-code/">วิธีการใช้รหัสส่วนลด</a></li>
                              </ul>
                          </li>
                          <li class="nav-item">
                              <a class="nav-link" href="https://prinenglish.com/contact/">Contact</a>
                          </li>
                          <li class="nav-item">
                              <a class="nav-link" href="https://online.prinenglish.com/log-in/">Log in</a>
                          </li>
                      </ul>
                  </div>
              </div>
          </nav>
      </div>
    </header>
    <main class="layout">
      <header>
        <h1 class="test">Free Grammar Pre-Test</h1>
      </header>
      <img src="https://online.prinenglish.com/wp-content/uploads/2019/11/Grammar-Pre-Test-new-2023-webp.webp" class="img-fluid mx-auto d-block mobile-img" alt="Grammar Pre-test">
      <br/>
      <div id="pre-test-result"></div>
      <div id="chart"></div>
      <div id="total-score"></div>
      <br/>
      <p><i class="fas fa-share-alt fa-2xl icons"></i></p>
      <h5><strong>แชร์ผลและประสบการณ์สนุก ๆ นี้ ให้เพื่อน ๆ ของท่านมาร่วมลองทำแบบทดสอบไปด้วยกันได้เลย</strong></h5>
      <div class="d-grid gap-2 d-md-block" style="margin: 20px 0;">
        <a onclick="window.open('https://www.facebook.com/sharer/sharer.php?u=' + currentURL)" type="button" class="btn btn-primary fb"><i class="fa-brands fa-facebook fa-xl"></i> Facebook</a>
        <a onclick="window.open('https://social-plugins.line.me/lineit/share?url=' + currentURL)" type="button" class="btn btn-primary line"><i class="fa-brands fa-line fa-xl"></i> Line</a>
      </div>
    </main>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3" crossorigin="anonymous"></script>
  <script src="https://code.jquery.com/jquery-3.6.1.min.js" integrity="sha384-i61gTtaoovXtAbKjo903+O55Jkn2+RtzHtvNez+yI49HAASvznhe9sZyjaSHTau9" crossorigin="anonymous"></script>
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <script src="https://www.line-website.com/social-plugins/js/thirdparty/loader.min.js" async="async" defer="defer"></script>
  <script async defer crossorigin="anonymous" src="https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v15.0" nonce="leKofFgj"></script>
  <script>
    //const currentURL = 'https://stackoverflow.com/';
    const currentURL = window.location.href;
    document.getElementById("facebook-button").href="document.URL";
  </script>
  <script>
    $(function() {
      let entry = window.location.pathname.replace(/\//g, "");
      let url = "/api/" + entry;
      $.ajax({
        type: "GET",
        url: url,
        success: data => {
          document.getElementById("pre-test-result").innerHTML = data;
        }
      });
    });

    $(function() {
      let entry = window.location.pathname.replace(/\//g, "");
      let url = "/chart/" + entry;
      $.ajax({
        type: "GET",
        url: url,
        success: data => {
          const dataset = data;
          
          const w = 1140;
          const h = 500;
          const padding = 50;

          const xScale = d3.scalePoint()
                          .domain(["Adjectives", "Adverbs", "Conditional Sentences", "Conjunctions", "Future", "Modal Verbs", "Nouns", "Passive", "Past", "Possession", "Prefixes and Suffixes", "Prepositions", "Present", "Pronouns", "Questions", "Verbs", "คะแนนรวมของท่าน"])
                          .range([padding, w - padding]);

          const yScale = d3.scaleLinear()
                          .domain([0, d3.max(dataset, (d) => d[1])])
                          .range([h - padding, padding]);

          const xAxis = d3.axisBottom(xScale);
          const yAxis = d3.axisLeft(yScale).tickFormat(d3.format('~%')); // Multiply by 100 and add a percent sign

          const svg = d3.select("#chart")
          .append("svg")
          .attr("viewBox", `0 0 ${w} ${h + padding}`); // Add some margin so x-axis labels are not cut off

          const tooltip = d3.select("#chart")
                        .append("div")
                        .attr("class", "tooltip")
                        .attr("id", "tooltip");

          // Line and shading
          svg.append("path")
            .datum(dataset)
            .attr("fill", "#0077ff")
            .attr("stroke", "#85775a")
            .attr("stroke-width", 1)
            .attr("d", d3.area()
              .curve(d3.curveMonotoneX)
              .x(d => xScale(d[0]))
              .y1(d => yScale(d[1]))
              .y0(h - padding)
              )

          // X-axis
          svg.append("g")
            .attr("transform", "translate(0," + (h - padding) + ")")
            .style("font-family", "Kanit")
            .call(xAxis)
            .selectAll("text")  
                  .style("text-anchor", "end")
                  .attr("transform", "translate(-10,0)rotate(-45)");

          // Y-axis
          svg.append("g")
            .attr("transform", "translate(" + padding + ", 0)")
            .style("font-family", "Kanit")
            .call(yAxis);

          // Circles + tooltip
          svg.selectAll("circle")
            .data(dataset)
            .enter()
            .append("circle")
            .attr("cx", (d) => xScale(d[0]))
            .attr("cy",(d) => yScale(d[1]))
            .attr("r", (d) => 8)
            .attr("fill", "#ed145b")
            .attr("data-xvalue", d => d[0])
            .attr("data-yvalue", d => d[1])
            .on("mouseover", (event, d) => {
              tooltip.attr("data-category", d[0])
                    .attr("data-percentage", d[1])
                    .attr("data-score", d[2])
                    .attr("data-full-score", d[3])
                    .html(`<span class="tooltip-text">${d[1] * 100}%<br/>${d[0]}<br/>ท่านได้ ${d[2]} จากคะแนนเต็ม ${d[3]}</span>`)
                    .style("text-align", "center")
                    .style("line-height", 1)
                    .style("opacity", 1)
                    .style("left", event.pageX + 5 + "px")
                    .style("top", event.pageY - 80 + "px");
            })
            .on("mouseout", d => {
              tooltip.style("opacity", 0)
            });
        }
      });
    });

    $(function() {
      let entry = window.location.pathname.replace(/\//g, "");
      let url = "/total-score/" + entry;
      $.ajax({
        type: "GET",
        url: url,
        success: data => {
          const dataset = data;

          const w = 1140;
          const h = 50;

          const svg = d3.select("#total-score")
          .append("svg")
          .attr("viewBox", `0 0 ${w} ${h}`);

          // Border
          svg.append("rect")
            .attr("fill-opacity", 0)  
            .attr("stroke", "#0077ff")
            .attr('x', 0)
            .attr('y', 0)
            .attr('rx', 5)
            .attr('width', 100 + "%")
            .attr('height', 50)

          // Horizontal bar
          svg.append("rect")
            .attr("fill", "#0077ff")
            .attr('x', 5)
            .attr('y', 5)
            .attr('rx', 5)
            .attr('width', dataset[0] - 1 + "%")
            .attr('height', 40)

          // Text inside horizontal bar
          svg.append('text')
            .attr('x', 20)
            .attr('y', 30)
            .style("font-family", "Kanit")
            .style("text-shadow", "-1px 1px 1px #fff, 1px 1px 1px #fff, 1px -1px 1px #fff,  -1px -1px 1px #fff")
            .text(`ท่านได้ ${dataset[1]} จากคะแนนเต็ม 35`)
        }
      });
    });

    document.addEventListener("DOMContentLoaded", () => {
      //console.log("Hello World!");
      /*let d = new Date();
      document.getElementById("testForm").innerHTML = "<p>Today's date is " + d + "</p>";*/
    });
  </script>
  <footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md left-column">
                <div>
                    <a href="https://prinenglish.com">
                        <img width="220" height="44" src="https://i0.wp.com/prinenglish.com/wp-content/uploads/logo_prin-english.webp">
                    </a>
                </div>
                <br/>
                <div>
                    <a href="https://www.facebook.com/prinenglish" target="_blank">
                        <i class="fa-brands fa-square-facebook fa-xl" style="color: #ffffff;"></i>
                    </a>
                    <a href="https://www.youtube.com/prinenglish" target="_blank">
                        <i class="fa-brands fa-square-youtube fa-xl" style="color: #ffffff;"></i>
                    </a>
                </div>
                <br/>
                <div>
                    <span class="white-color">© 2015-2023, PrinEnglish.</span>
                </div>
                <br/>
                <div>
                    <script src="https://www.trustmarkthai.com/callbackData/initialize.js?t=09d17eaea2-22-4-4bc7484f75598986d1ae464d63414a9f33" id="dbd-init"></script><span id="Certificate-banners"></span>
                </div>
                <br/>
            </div>
            <div class="col-md">
                <ul>
                    <span>
                        <a href="https://prinenglish.com/about/" class="white-color-link">About Aj. Prin</a><br/>
                        <a href="https://online.prinenglish.com/pass-key/" class="white-color-link">Pass Key</a><br/>
                        <a href="https://online.prinenglish.com/our-courses/" class="white-color-link">Online Courses</a><br/>
                        <a href="https://online.prinenglish.com/trial/" class="white-color-link">Free Trial</a><br/>
                        <a href="https://online.prinenglish.com/quizzes/pre-test/" class="white-color-link">Pre-Test</a><br/>
                        <a href="https://prinenglish.com/toeic-pre-test/" class="white-color-link">TOEIC Pre-Test</a><br/>
                        <a href="https://prinenglish.com/students-reviews/" class="white-color-link">Reviews</a><br/>
                        <a href="https://prinenglish.com/corporate-training/" class="white-color-link">ลูกค้าองค์กร</a><br/>
                        <a href="https://prinenglish.com/data-services/" class="white-color-link">Data Services</a><br/>
                        <a href="https://prinenglish.com/all-about-toeic/" class="white-color-link">All about TOEIC</a>
                    </span>
                </ul>
            </div>
            <div class="col-md">
                <ul>
                    <span>
                        <a href="https://prinenglish.com/faq/" class="white-color-link">FAQs</a><br/>
                        <a href="https://prinenglish.com/how-to-use-a-code/" class="white-color-link">How to Use Discount Codes</a><br/>
                        <a href="https://prinenglish.com/contents/" class="white-color-link">Blog</a><br/>
                        <a href="https://prinenglish.com/videos/" class="white-color-link">Videos</a><br/>
                        <a href="https://prinenglish.com/contact/" class="white-color-link">Contact</a><br/>
                        <a href="https://online.prinenglish.com/log-in/" class="white-color-link">Log in</a><br/>
                        <a href="https://online.prinenglish.com/privacy-and-data-protection-policies/" class="white-color-link">นโยบายความเป็นส่วนตัว</a><br/>
                        <a href="https://online.prinenglish.com/terms-and-conditions/" class="white-color-link">ข้อตกลงและเงื่อนไขในการใช้บริการ</a>
                    </span>
                </ul>
            </div>
        </div>
    </div>
  </footer>
  </body>
</html>